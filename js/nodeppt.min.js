!function(e,t,n,i,s,o){function r(e,t,n){e&&"function"==typeof e.dispatchEvent||(n=t,t=e,e=null);var i=document.createEvent("Event");if(i.initEvent("ppt"+t,!0,!0),i.stopped=!1,i.stop=function(){i.preventDefault(),i.stopPropagation(),i.stopped=!0},n)for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);return e&&e.dispatchEvent&&e.dispatchEvent(i),i}function a(){Ce.current=le+1,H&&(H.style.width=(le+1)/(Q+1)*100+"%")}function c(e){return ne.slice.call(e)}function l(e,n){return(n=n&&1===n.nodeType?n:t).querySelectorAll(e)}function u(e){return t.getElementById(e)}function d(e){y()?Ce.curItem--:(Ce.curItem=0,b(U[le]),ue=le,--le<0&&(le=0),k("prev",!e))}function f(e){L()?Ce.curItem++:(Ce.curItem=0,b(U[le]),ue=le,++le>Q&&(le=Q),k("next",!e),g(U[le])(U[le+1]))}function p(){me&&clearTimeout(me),me=setTimeout(h,800)}function v(e){if(!e)return e;e=e.split(".");for(var t=window,n=0,i=e.length;n<i;n++){var s=typeof t[e[n]];if("object"!==s&&"function"!==s)break;t=t[e[n]]}return"function"==typeof t?t:null}function h(){var e=U[le];if(e&&(!e||1===e.nodeType)){var t=e.dataset,n=t.incallback||t.onEnter,i=v(n),s=r("Enter",{container:e});i&&"function"==typeof i&&W(n,s),["Keypress","Build"].forEach(function(n){var i=t["on"+n];(i=v(i))&&"function"==typeof i&&e.addEventListener("ppt"+n,i,!0)});var o=c(l("iframe[data-src]",e));o.length&&o.forEach(function(e){var t=e.dataset.src;t&&(e.src=t,delete e.dataset.src)})}}function b(e){!e||e&&1!==e.nodeType||(ge&&clearTimeout(ge),ge=setTimeout(function(){m(e)},1500))}function m(e){var t=e.dataset,n=t.outcallback||t.onLeave,i=v(n),s=r("Leave",{container:e});i&&"function"==typeof i&&W(n,s),["Keypress","Build"].forEach(function(n){var i=t["on"+n];(i=v(i))&&"function"==typeof i&&e.removeEventListener("ppt"+n,i,!0)})}function g(e){var t=arguments.callee;if(e&&1===e.nodeType)for(var n=l("preload",e),i=n.length;i--;){var s=n[i],o=s.dataset,r=o.type,a=o.url,c=V["load"+r.toUpperCase()];"function"==typeof c&&c(a,function(e){return function(){e.parentNode&&e.parentNode.removeChild(e),e=null}}(s))}return t}function L(e){if(te.classList.contains("overview"))return!1;$curSlide=U[le];var t=r($curSlide,"Build",{direction:"next",container:$curSlide});if(t.stopped)return t.stopped;var n,i=c(l(".building"),$curSlide);if(i.length)for(;n=i.shift();)(n=n.classList).remove("building"),n.add("builded");var s=l(".tobuild",$curSlide);return!!s.length&&((n=s.item(0).classList).remove("tobuild"),n.contains("subSlide")&&c(l(".subSlide.builded",$curSlide)).forEach(function(e){e.classList.add("subBuilded")}),n.add("building"),!0)}function y(e){if(te.classList.contains("overview"))return!1;$curSlide=U[le];var t=r($curSlide,"Build",{direction:"prev",container:$curSlide});if(t.stopped)return t.stopped;var n,i,s=c(l(".building"),$curSlide),o=s.length;if(o)for(;n=s.shift();){var a=n.classList;if(a.remove("building"),a.add("tobuild"),i=n,a.contains("subSlide")){var u=c(l(".subSlide.builded.subBuilded",$curSlide)).pop();u&&u.classList.remove("subBuilded")}}var d=c(l(".builded",$curSlide));if(!d.length&&!o)return!1;var f=d.pop();return f&&(i||(i=f),(n=f.classList).remove("builded"),0===o?(n.add("tobuild"),(f=d.pop()).classList.remove("builded"),f.classList.add("building")):n.add("building")),!0}function x(){for(var e,t=Q,n=Te.transition;e=U[t--];){var i=c(l(".build > *,.fadeIn > *,.rollIn > *,.moveIn > *,.bounceIn > *,.zoomIn > *,.fade > *,.subSlide",e)),s=e.dataset;i.forEach(function(e,t){e.classList.add("tobuild"),"index"in e.dataset||(e.dataset.index=t)}),s.transition||(s.transition=n)}}function k(n){E(),a(),ae&&(ce=!0,e.location.hash="#"+le),p(n),xe(),t.body.classList.contains("overview")?w():(t.body.classList.contains("popup")||t.body.classList.remove("with-notes"),Ie())}function E(){var e=le,t="pagedown";if(ue!==le||($cur=U[le],!$cur.classList.contains("pageup"))){ue>le&&(t="pageup");for(var i=0,s=U.length;i<s;++i)switch(i){case e-2:T(U[i],"far-past",t);break;case e-1:T(U[i],"past",t);break;case e:T(U[i],"current",t);break;case e+1:T(U[i],"next",t);break;case e+2:T(U[i],"far-next",t);break;default:T(U[i])}n.fire("slide.update",le,0,t)}}function S(e){te.classList.toggle("overview"),w(),e||n.fire("overview")}function w(){for(var e,n=t.body.classList.contains("overview"),i=0;e=U[i];i++)e.style.transform=e.style.webkitTransform=e.style.msTransform=e.style.mozTransform=n?"translateZ(-2500px) translate("+105*(i-le)+"%, 0%)":"",e.style.animation=e.style.webkitAnimation=e.style.msAnimation=e.style.mozAnimation=n?"none":"",Ce.fire(n?"overviewshown":"overviewhidden")}function T(e,t,n){if(e){t&&e.classList.add(t),n&&-1===location.href.indexOf("_multiscreen=control")&&-1===location.href.indexOf("iscontroller=1")&&e.classList.add(n);["next","past","far-next","far-past","current","pagedown","pageup"].forEach(function(i){t!==i&&n!==i&&e.classList.remove(i)})}}function F(e){var i=e.keyCode,s=e.target;if(!/^(input|textarea)$/i.test(s.nodeName)&&!s.isContentEditable){e.isFromControl||n.fire("nodepptEvent:eventKeyup",e),n.fire("slide.keyup",e);var o=U[le],a=r(o,"Keypress",{keyCode:i,orgiTarget:s,container:o});if(a.stopped)return a.stopped;switch(i){case 122:pe.supportsFullScreen&&pe.requestFullScreen(document.body);break;case 13:if(t.body.classList.contains("overview"))S(e.isFromControl);else{var c=parseInt(de)-1;c>=0&&c<=Q&&z(c)}de="";break;case 72:t.body.classList.toggle("highlight-code"),setTimeout(function(){t.body.classList.toggle("highlight-code")},2e3);break;case 87:e.shiftKey&&e.metaKey||te.classList.contains("popup")||R.classList.toggle("layout-widescreen");break;case 79:S(e.isFromControl);break;case 78:te.classList.contains("popup")||t.body.classList.toggle("with-notes");break;case 80:te.classList.contains("popup")||M(e.isFromControl);break;case 66:if(Z.context){Z.context.strokeStyle="rgba(0,0,255,0.5)";break}case 89:if(Z.context){Z.context.strokeStyle="rgba(255,255,0,0.5)";break}case 82:if(Z.context){Z.context.strokeStyle="rgba(255,0,0,0.5)";break}case 71:if(Z.context){Z.context.strokeStyle="rgba(0,255,0,0.5)";break}case 77:if(Z.context){Z.context.strokeStyle="rgba(255,0,255,0.5)";break}case 49:de+="1",Z.context&&(Z.context.lineWidth=3);break;case 50:de+="2",Z.context&&(Z.context.lineWidth=7);break;case 51:de+="3",Z.context&&(Z.context.lineWidth=11);break;case 52:de+="4",Z.context&&(Z.context.lineWidth=15);break;case 48:de+="0";break;case 53:de+="5";break;case 54:de+="6";break;case 55:de+="7";break;case 56:de+="8";break;case 57:de+="9";break;case 67:te.classList.contains("popup")||xe(e.isFromControl);break;case 33:case 37:case 38:d();break;case 32:case 34:case 39:case 40:f()}}}function I(e){if(!Le&&1===e.touches.length){ie=0,se=0;var t=e.touches[0];oe=t.pageX,re=t.pageY,te.addEventListener("touchmove",C,!0),te.addEventListener("touchend",$,!0)}}function C(e){if(e.touches.length>1)X();else{var t=e.touches[0];ie=t.pageX-oe,se=t.pageY-re}try{e.preventDefault()}catch(e){console.log(e)}}function $(e){var t=Math.abs(ie),n=Math.abs(se);if(t>15&&n<2*t/3&&ie>0)return X(),D(38);D(39),X()}function D(e){var t=document.createEvent("Event");t.initEvent("keyup",!0,!0),t.keyCode=e,document.dispatchEvent(t)}function X(){te.removeEventListener("touchmove",C,!0),te.removeEventListener("touchend",$,!0)}function Y(){t.addEventListener("keyup",F,!1),te.addEventListener("touchstart",I,!1),u("_btn-bar").addEventListener("click",function(){var e=!1;return function(){e?(this.classList.remove("fa-close"),this.classList.add("fa-bars"),u("_btn-box").style.display="none"):(this.classList.remove("fa-bars"),this.classList.add("fa-close"),u("_btn-box").style.display="inline-block"),e=!e}}(),!1),u("_btn-prev").addEventListener("click",function(){D(38)},!1),u("_btn-next").addEventListener("click",function(){D(39)},!1),u("_btn-overview").addEventListener("click",function(){var e=!1;return function(){e?(this.classList.add("fa-compress"),this.classList.remove("fa-expand")):(this.classList.add("fa-expand"),this.classList.remove("fa-compress")),S(),e=!e}}(),!1),u("_btn-brush").addEventListener("click",function(){var e=!1;return function(){e?(this.classList.add("fa-paint-brush"),this.classList.remove("fa-eraser"),xe()):(M(),this.classList.add("fa-eraser"),this.classList.remove("fa-paint-brush")),e=!e}}(),!1),e.addEventListener("hashchange",function(){location.hash&&!ce&&(ae=!1,b(U[le]),ue=le,le=0|location.hash.substr(1),k(),ae=!0),ce=!1},!0)}function B(){Z.context=Z.getContext("2d");var e=Z.context;e.lineWidth=3,e.lineJoin="round",e.strokeStyle="rgba(255,0,0,0.5)"}function M(e){Z&&(Le=!0,te.classList.contains("with-notes")&&(ye=1,te.classList.remove("with-notes"),te.classList.remove("popup")),Z.width=te.clientWidth,Z.height=te.clientHeight,B(),Z.style.display="",R.style.overflow="hidden",Z.addEventListener("mousedown",ke,!0),Z.addEventListener("mouseup",Se,!0),Z.addEventListener("mousemove",we,!0),Z.addEventListener("touchmove",we,!0),Z.addEventListener("touchend",Se,!0),Z.addEventListener("touchcancel",Se,!0),Z.addEventListener("touchstart",ke,!0),t.addEventListener("selectstart",K,!0),e||n.fire("nodepptEvent:show paint"))}function K(){return!1}function O(){R.style.overflow="",Z.context&&Z.context.clearRect(0,0,j,A),Z.style.display="none"}function W(e,t){v(e)(t)}function _(){G=u(Te.tipID),R=u(Te.containerID),j=Te.width,A=Te.height,H=u(Te.progressID),Ce.$slides=U=c(l(Te.slideClass,R)),Q=U.length,Ce.count=Q,Q--,(Z=u(Te.drawBoardID))&&(Z.style.display="none")}function q(){i(Te.dir+"img.screenfull.js",function(){var e=c(l(Te.slideClass+" img",R));screenfull(e)})}function P(){Te.theme&&s("/css/theme."+Te.theme+".css")}function J(){fe&&fe.print&&c(l("iframe[data-src]")).forEach(function(e){0===e.src.indexOf("about:blank")&&e.dataset.src&&(e.src=e.dataset.src)})}function N(e){var t=l(".magic",e.container);if(t.length){var n=0|((t=t[0]).dataset.index||0),i="pagedown";"prev"===e.direction&&(i="pageup");var s=c(l(".magicItem",t)),o=s.length;if(!e.firstKiss){if("prev"===e.direction){if(--n<0)return n=0,t.dataset.index=n,void(t.dataset.status="wait");e.stop()}else{if(++n===o)return n=o-1,t.dataset.index=n,void(t.dataset.status="done");e.stop()}t.dataset.index=n}e.firstKiss&&s[n].addEventListener(ee,function(){t.style.visibility="visible"});for(var r=0;r<o;++r)switch(r){case n-2:T(s[r],"far-past",i);break;case n-1:T(s[r],"past",i);break;case n:T(s[r],"current",i);break;case n+1:T(s[r],"next",i);break;case n+2:T(s[r],"far-next",i);break;default:T(s[r])}}}function z(e){ue=(ue=e-1)<0?0:ue,le=e,k()}var j,A,H,R,U,Z,G,Q,V={loadJS:i,loadCSS:s},ee=function(){var e,t=document.createElement("fakeelement"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==t.style[e])return n[e]}(),te=t.body,ne=[],ie=0,se=0,oe=0,re=0,ae=!0,ce=!1,le=0,ue=0,de="",fe=function(e){var t=(e=e?decodeURIComponent(e):"").split("?"),n={};return(t[1]?t[1]:t[0]).split("&").forEach(function(e){(e=e.split("="))[0].length>0&&(n[e[0]]=e[1]||"")}),n}(location.search),pe={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",prefix:""},ve="webkit moz o ms".split(" ");if(void 0!==document.cancelFullScreen)pe.supportsFullScreen=!0;else for(var he=0,be=ve.length;he<be;he++)if(pe.prefix=ve[he],void 0!==document[pe.prefix+"CancelFullScreen"]){pe.supportsFullScreen=!0;break}pe.supportsFullScreen&&(pe.fullScreenEventName=pe.prefix+"fullscreenchange",pe.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}},pe.requestFullScreen=function(e){return""===this.prefix?e.requestFullScreen():e[this.prefix+"RequestFullScreen"]()},pe.cancelFullScreen=function(e){return""===this.prefix?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()});var me,ge,Le=!1,ye=0,xe=function(e){O(),de="",ye&&(te.classList.add("with-notes"),te.classList.add("popup")),Le=!1,Z.removeEventListener("mousedown",ke),Z.removeEventListener("mouseup",Se),Z.removeEventListener("mousemove",we),Z.removeEventListener("touchstart",ke),Z.removeEventListener("touchmove",we),Z.removeEventListener("touchend",Se),Z.removeEventListener("touchcancel",Se),t.removeEventListener("selectstart",K,!0),e||n.fire("nodepptEvent:remove paint")},ke=function(n){Z.isMouseDown=!0;try{n=n.targetTouches[0]}catch(e){}var i=Z.iLastX=n.layerX||n.offsetX||n.clientX-Z.offsetLeft+(e.pageXOffset||t.body.scrollLeft||t.documentElement.scrollLeft),s=Z.iLastY=n.layerY||n.offsetY||n.clientY-Z.offsetTop+(e.pageYOffset||t.body.scrollTop||t.documentElement.scrollTop);return Ee.push({x:i,y:s}),!1},Ee=[],Se=function(e){Z.isMouseDown=!1,Z.iLastX=-1,Z.iLastY=-1,e.isFromControl||n.fire("nodepptEvent:paint points",Ee),Ee.length=0};n.on("controlEvent:paint points",function(e){var t=e.points,n=e.screen,i=n.width/2,s=n.height/2,o=te.offsetWidth,r=te.offsetHeight,a=o/2,c=r/2,l=o/n.width,u=r/n.height,d=Z.context;if(d){d.beginPath();var f=a-(i-t[0].x)*l,p=c-(s-t[0].y)*u;d.moveTo(f,p);for(var v=0,h=t.length;v<h;v++)d.lineTo(a-(i-t[v].x)*l,c-(s-t[v].y)*u);d.stroke()}});var we=function(n){var i=n;if(Z.isMouseDown){try{void 0!==n.targetTouches&&(n=n.targetTouches[0])}catch(e){console.log(e)}var s=n.layerX||n.offsetX||n.clientX-Z.offsetLeft+(e.pageXOffset||t.body.scrollLeft||t.documentElement.scrollLeft),o=n.layerY||n.offsetY||n.clientY-Z.offsetTop+(e.pageYOffset||t.body.scrollTop||t.documentElement.scrollTop),r=Z.context;r.beginPath(),r.moveTo(Z.iLastX,Z.iLastY),r.lineTo(s,o),r.stroke(),Z.iLastX=s,Z.iLastY=o,Ee.push({x:s,y:o});try{i.preventDefault()}catch(e){console.log(e)}return!1}},Te={containerID:"container",isControlDevice:!1,drawBoardID:"drawBoard",slideClass:".slide",buildClass:".build",progressID:"progress",transition:"",tipID:"tip",webSocketHost:"",width:900,dir:"./",height:700,control:!1};N.init=function(e){var t=l(".magic",e.container);if(t.length){var n=(t=t[0]).dataset.index||0;switch(t.dataset.status){case"done":t.dataset.index=n,n--;break;case"wait":break;default:e.firstKiss=!0,N(e)}}};var Fe=document.querySelector("#slide")||!1,Ie=function(){if(Fe){var e=Ce.current+" / "+Ce.count;Fe.innerHTML=e}},Ce={current:0,curItem:0,init:function(e){e=e||{};for(var t in Te)t in e&&(Te[t]=e[t]);if(["theme","transition"].forEach(function(e){fe&&fe[e]&&(Te[e]=fe[e])}),Ce.dir=Te.dir,Te.control){var n=Te.control;i(Te.dir+"nodeppt.control.js",function(){Ce.Control.load(n.type,n.args)})}_(),P(),x(),q(),Y(),ue=le,fe&&fe.print?J():(location.hash&&(le=0|location.hash.substr(1))?k():(E(),a(),p()),g(U[le])(U[le+1])),Ie(),te.style.opacity=1},setIndex:function(e,t){function n(){t--<=0||(L(),setTimeout(n,300))}--e<0&&(e=0),z(e),t>0&&n()},next:f,prev:d,doSlide:k,proxyFn:W,showPaint:M,removePaint:xe,buildNextItem:L,buildPrevItem:y,magic:N};["on","un","fire"].forEach(function(e){Ce[e]=function(){var t=c(arguments);t[0]="slide."+t[0],n[e].apply(null,t)}}),e.Slide=Ce,e.jumpSlide=z,e.getcurIndex=function(){return le}}(window,document,MixJS.event.broadcast,MixJS.loadJS,MixJS.loadCSS);